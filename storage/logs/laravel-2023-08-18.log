[2023-08-18 18:16:21] local.INFO: //////////////////////////  CALBACK STARTED //////////////////////////  
[2023-08-18 18:16:21] local.INFO: //  $source STARTED //  
[2023-08-18 18:16:21] local.INFO: {
  "type" : "notification",
  "event" : "payment.canceled",
  "object" : {
    "id" : "2c71b69f-000f-5000-9000-13a845055fbf",
    "status" : "canceled",
    "amount" : {
      "value" : "2258.00",
      "currency" : "RUB"
    },
    "description" : "Оплата печати книги 'Моя вторая книга!'",
    "recipient" : {
      "account_id" : "838224",
      "gateway_id" : "1901208"
    },
    "created_at" : "2023-08-18T16:57:03.258Z",
    "test" : true,
    "paid" : false,
    "refundable" : false,
    "metadata" : {
      "transaction_id" : "988",
      "url_redirect" : "http://127.0.0.1:8000/myaccount/mybooks/103/book_page",
      "own_book_payment_type" : "Print_only",
      "user_id" : "829",
      "own_book_id" : "103"
    },
    "cancellation_details" : {
      "party" : "yoo_money",
      "reason" : "expired_on_confirmation"
    }
  }
}  
[2023-08-18 18:16:21] local.INFO: // $source ENDED //  
[2023-08-18 18:16:21] local.INFO: //  $requestBody STARTED //  
[2023-08-18 18:16:21] local.INFO: array (
  'type' => 'notification',
  'event' => 'payment.canceled',
  'object' => 
  array (
    'id' => '2c71b69f-000f-5000-9000-13a845055fbf',
    'status' => 'canceled',
    'amount' => 
    array (
      'value' => '2258.00',
      'currency' => 'RUB',
    ),
    'description' => 'Оплата печати книги \'Моя вторая книга!\'',
    'recipient' => 
    array (
      'account_id' => '838224',
      'gateway_id' => '1901208',
    ),
    'created_at' => '2023-08-18T16:57:03.258Z',
    'test' => true,
    'paid' => false,
    'refundable' => false,
    'metadata' => 
    array (
      'transaction_id' => '988',
      'url_redirect' => 'http://127.0.0.1:8000/myaccount/mybooks/103/book_page',
      'own_book_payment_type' => 'Print_only',
      'user_id' => '829',
      'own_book_id' => '103',
    ),
    'cancellation_details' => 
    array (
      'party' => 'yoo_money',
      'reason' => 'expired_on_confirmation',
    ),
  ),
)  
[2023-08-18 18:16:21] local.INFO: // $requestBody ENDED //  
[2023-08-18 18:16:21] local.INFO: //  $notification STARTED //  
[2023-08-18 18:16:21] local.INFO: array (
  'id' => '2c71b69f-000f-5000-9000-13a845055fbf',
  'status' => 'canceled',
  'amount' => 
  array (
    'value' => '2258.00',
    'currency' => 'RUB',
  ),
  'description' => 'Оплата печати книги \'Моя вторая книга!\'',
  'recipient' => 
  array (
    'account_id' => '838224',
    'gateway_id' => '1901208',
  ),
  'created_at' => '2023-08-18T16:57:03.258Z',
  'test' => true,
  'paid' => false,
  'refundable' => false,
  'metadata' => 
  array (
    'transaction_id' => '988',
    'url_redirect' => 'http://127.0.0.1:8000/myaccount/mybooks/103/book_page',
    'own_book_payment_type' => 'Print_only',
    'user_id' => '829',
    'own_book_id' => '103',
  ),
  'cancellation_details' => 
  array (
    'party' => 'yoo_money',
    'reason' => 'expired_on_confirmation',
  ),
)  
[2023-08-18 18:16:21] local.INFO: // $notification ENDED //  
[2023-08-18 18:16:21] local.ERROR: Undefined array key "payment_method" {"exception":"[object] (ErrorException(code: 0): Undefined array key \"payment_method\" at C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\app\\Http\\Controllers\\PaymentController.php:282)
[stacktrace]
#0 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Bootstrap\\HandleExceptions.php(254): Illuminate\\Foundation\\Bootstrap\\HandleExceptions->handleError()
#1 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\app\\Http\\Controllers\\PaymentController.php(282): Illuminate\\Foundation\\Bootstrap\\HandleExceptions->Illuminate\\Foundation\\Bootstrap\\{closure}()
#2 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\PaymentController->callback()
#3 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction()
#4 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(260): Illuminate\\Routing\\ControllerDispatcher->dispatch()
#5 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#6 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(799): Illuminate\\Routing\\Route->run()
#7 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(141): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}()
#8 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\app\\Http\\Middleware\\UserLastActivity.php(29): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#9 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): App\\Http\\Middleware\\UserLastActivity->handle()
#10 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\SubstituteBindings.php(50): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#11 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle()
#12 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\VerifyCsrfToken.php(78): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#13 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Foundation\\Http\\Middleware\\VerifyCsrfToken->handle()
#14 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\View\\Middleware\\ShareErrorsFromSession.php(49): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#15 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\View\\Middleware\\ShareErrorsFromSession->handle()
#16 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Session\\Middleware\\StartSession.php(121): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#17 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Session\\Middleware\\StartSession.php(64): Illuminate\\Session\\Middleware\\StartSession->handleStatefulRequest()
#18 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Session\\Middleware\\StartSession->handle()
#19 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse.php(37): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#20 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse->handle()
#21 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Cookie\\Middleware\\EncryptCookies.php(67): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#22 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Cookie\\Middleware\\EncryptCookies->handle()
#23 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(116): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#24 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(800): Illuminate\\Pipeline\\Pipeline->then()
#25 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(777): Illuminate\\Routing\\Router->runRouteWithinStack()
#26 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(741): Illuminate\\Routing\\Router->runRoute()
#27 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(730): Illuminate\\Routing\\Router->dispatchToRoute()
#28 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch()
#29 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(141): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}()
#30 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\livewire\\livewire\\src\\DisableBrowserCache.php(19): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#31 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Livewire\\DisableBrowserCache->handle()
#32 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#33 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle()
#34 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle()
#35 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#36 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle()
#37 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle()
#38 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#39 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle()
#40 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(86): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#41 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle()
#42 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(49): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#43 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Http\\Middleware\\HandleCors->handle()
#44 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#45 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Http\\Middleware\\TrustProxies->handle()
#46 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(116): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}()
#47 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then()
#48 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter()
#49 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\public\\index.php(52): Illuminate\\Foundation\\Http\\Kernel->handle()
#50 C:\\Users\\tomas\\Документы\\Projects\\bookfirst\\server.php(21): require_once('C:\\\\Users\\\\tomas\\\\...')
#51 {main}
"} 
